import{o as f,c as p,a as m,t as M,n as B,b as $,p as E,d as I,r as V,e as x,F as N,f as T,u as O}from"./index.74f69be4.js";const R={class:"control"},S=["id","value"],U=["for"],A={__name:"ControlButton",props:["mode","btnType"],setup(c){function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}return(t,l)=>(f(),p("div",R,[m("input",{type:"radio",id:c.btnType,value:c.btnType,onClick:l[0]||(l[0]=o=>t.$emit("update:modelValue",o))},null,8,S),m("label",{for:c.btnType,class:B({selected:c.mode===c.btnType})},M(e(c.btnType)),11,U)]))}};const W=(c,e)=>{const t=c.__vccOpts||c;for(const[l,o]of e)t[l]=o;return t},D=c=>(E("data-v-5907b7da"),c=c(),I(),c),G={class:"controls"},L={class:"control-group"},Y=D(()=>m("label",{for:"mode"},"Mode",-1)),z={__name:"GameControls",props:["mode"],setup(c){return(e,t)=>(f(),p("div",G,[m("div",L,[Y,$(A,{mode:c.mode,btnType:"car","onUpdate:modelValue":t[0]||(t[0]=l=>e.$emit("update:modelValue",l.target.value))},null,8,["mode"]),$(A,{mode:c.mode,btnType:"road","onUpdate:modelValue":t[1]||(t[1]=l=>e.$emit("update:modelValue",l.target.value))},null,8,["mode"])])]))}},H=W(z,[["__scopeId","data-v-5907b7da"]]),F=["\u{1F697}","\u{1F699}"];class j{constructor(e,t,l){this.id=`${e}-${t}`,this.row=e,this.col=t,this.value=l,this.correct=!1,this.element=null,this.hover=!1,this.displayValue=null,this.carIcon=F[Math.floor(Math.random()*F.length)]}display(e){this.displayValue=e,e===this.value?this.correct=!0:this.correct=!1}}class X{constructor(e,t){if(this.cells=[],typeof e=="object"&&e instanceof Array){this.rows=e.length,this.cols=e[0].length;for(let l=0;l<this.rows;l++){this.cells[l]=[];for(let o=0;o<this.cols;o++)this.cells[l][o]=new j(l,o,e[l][o])}}else this.rows=e,this.cols=t,this.generateBoard()}getCell(e,t){return this.cells[e][t]}setCell(e,t,l){this.cells[e][t].value=l}getRow(e){return this.cells[e]}getCol(e){let t=[];for(let l=0;l<this.rows;l++)t.push(this.cells[l][e]);return t}getFlatCells(){return this.cells.flat()}getCellFromElement(e){const t=e.getAttribute("data-row"),l=e.getAttribute("data-col");return this.getCell(t,l)}checkBoard(){const e=this.getFlatCells(),t=e.filter(o=>o.correct||o.value==="charge"),l=e.filter(o=>o.displayValue!==null);return e.length===t.length?"win":e.length===l.length?"wrong":!1}getCellNeighborsWithDiagonal(e){const t=[];for(let l=-1;l<=1;l++)for(let o=-1;o<=1;o++){if(l===0&&o===0)continue;const v=e.row+l,s=e.col+o;v>=0&&v<this.rows&&s>=0&&s<this.cols&&t.push(this.getCell(v,s))}return t}getCellNeighbors(e){const t=e.row,l=e.col,o=[];return t>0&&o.push(this.getCell(t-1,l)),t<this.rows-1&&o.push(this.getCell(t+1,l)),l>0&&o.push(this.getCell(t,l-1)),l<this.cols-1&&o.push(this.getCell(t,l+1)),o}generateBoard(){for(let s=0;s<this.rows;s++){this.cells[s]=[];for(let d=0;d<this.cols;d++)this.cells[s][d]=new j(s,d,null)}let e=0;const t=1e3;for(;this.getFlatCells().filter(s=>s.value===null).length>0;){const s=Math.floor(Math.random()*this.rows),d=Math.floor(Math.random()*this.cols),k=this.getCell(s,d);if(k.value!==null){if(e++,e>=t)break;continue}const w=this.getCellNeighbors(k).filter(n=>n.value===null);if(w.length===0){if(e++,e>=t)break;continue}const b=[];for(const n of w)this.getCellNeighborsWithDiagonal(n).filter(h=>h.value==="car"||h.value==="charge"&&h.row!==s&&h.col!==d).length===0&&b.push(n);if(b.length===0){if(e++,e>=t)break;continue}this.setCell(s,d,"charge");let y,i;y=b[Math.floor(Math.random()*b.length)],i=this.getCellNeighborsWithDiagonal(y),i.filter(n=>n.value==="car").length===0&&this.setCell(y.row,y.col,"car");const a=i.filter(n=>n.value===null);for(const n of a)n.value===null&&this.setCell(n.row,n.col,"road")}const l=this.getFlatCells().filter(s=>s.value===null);for(const s of l)this.setCell(s.row,s.col,"road");const o=this.getFlatCells().filter(s=>s.value==="charge"),v=Math.floor(o.length*.1);for(let s=0;s<v;s++){const d=o[Math.floor(Math.random()*o.length)];this.setCell(d.row,d.col,"road")}}getAs(e){const t=[...this.cells];for(let l=0;l<this.rows;l++)t[l]=t[l].map(o=>o[e]);return t}}const q=c=>(E("data-v-2e2a569b"),c=c(),I(),c),J={class:"game-board"},K=q(()=>m("h1",null,"Charge Up",-1)),P=["data-row","data-col"],Q={key:0,class:"emoji"},Z={key:1,class:"emoji"},ee={key:2,class:"emoji"},te={key:3},le={class:"row-count-cells"},oe=["onMouseenter","onMouseleave","onClick"],se={class:"count"},ae={class:"col-count-cells"},ne=["onMouseenter","onMouseleave","onClick"],re={class:"count"},ce={__name:"App",setup(c){O(i=>({"055268ca":t,"05600e96":l}));const e=V(null),t=5,l=7,o=V(new X(t,l));function v(i,u,a){const n=u==="row"?o.value.getRow(a):o.value.getCol(a),r=i.type==="mouseenter",g=[],h=[];for(const _ of n)_.value!=="charge"&&(_.displayValue!==s.value?g.push(_):h.push(_));if(g.length>0)for(const _ of g)_.hover=r;else for(const _ of h)_.hover=r}const s=V("road");let d=!0;function k(i){s.value=i}function C(i,u){i.display(u);const a=o.value.checkBoard();!a||setTimeout(()=>{a==="win"?alert("You win!"):a==="wrong"&&alert("Wrong!"),console.log(o.value.getAs("value")),console.log(o.value.getAs("correct"))},50)}function w(i,u,a){const n=u==="row"?o.value.getRow(a):o.value.getCol(a),r=[],g=[];for(const h of n)h.value!=="charge"&&(h.displayValue!==s.value?r.push(h):g.push(h));if(r.length>0)for(const h of r)C(h,s.value),h.element.classList.add("hover");else for(const h of g)C(h,null),h.element.classList.add("hover")}function b(i){if(i.buttons!==1)return;const u=i.clientX,a=i.clientY;for(const n of e.value.children){const r=n.getBoundingClientRect(),g=o.value.getCellFromElement(n);g.value!=="charge"&&u>=r.left&&u<=r.right&&a>=r.top&&a<=r.bottom&&(g.displayValue!==s.value&&d?C(g,s.value):g.displayValue===s.value&&!d&&C(g,null))}}function y(i){const u=o.value.getCellFromElement(i.target);u.value!=="charge"&&(u.displayValue===s.value?(d=!1,C(u,null)):(d=!0,C(u,s.value)))}return x(()=>{console.log(o);for(const i of e.value.children){const u=o.value.getCellFromElement(i);u.element=i,u.value==="charge"&&C(u,"charge")}}),(i,u)=>(f(),p("div",J,[K,m("div",{ref_key:"cellElements",ref:e,class:"game-board-cells",onMousemove:b},[(f(!0),p(N,null,T(o.value.getFlatCells(),a=>(f(),p("div",{"data-row":a.row,"data-col":a.col,key:a.id,class:B(["game-cell",{visible:a.displayValue,charge:a.value==="charge",hover:a.hover}]),onMousedown:y},[a.displayValue==="charge"?(f(),p("span",Q,"\u26FD")):a.displayValue==="car"?(f(),p("span",Z,M(a.carIcon),1)):a.displayValue?(f(),p("span",ee,"\xA0")):(f(),p("span",te,"\xA0"))],42,P))),128))],544),m("div",le,[(f(!0),p(N,null,T(o.value.cells,(a,n)=>(f(),p("div",{key:a,class:"row-count",onMouseenter:r=>v(r,"row",n),onMouseleave:r=>v(r,"row",n),onClick:r=>w(r,"row",n)},[m("span",se,M(a.filter(r=>r.value==="car").length),1)],40,oe))),128))]),m("div",ae,[(f(!0),p(N,null,T(o.value.cells[0],(a,n)=>(f(),p("div",{key:a,class:"col-count",onMouseenter:r=>v(r,"col",n),onMouseleave:r=>v(r,"col",n),onClick:r=>w(r,"col",n)},[m("span",re,M(o.value.getCol(n).filter(r=>r.value==="car").length),1)],40,ne))),128))]),$(H,{mode:s.value,"onUpdate:modelValue":k},null,8,["mode"])]))}},ue=W(ce,[["__scopeId","data-v-2e2a569b"]]);export{ue as default};
